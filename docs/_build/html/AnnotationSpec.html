

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>NNI Annotation &mdash; Neural Network Intelligence v0.5.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ" href="FAQ.html" />
    <link rel="prev" title="References" href="Reference.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html">
          

          
            
            <img src="_static/nni_logo_dark.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="QuickStart.html">QuickStart</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Reference.html">References</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="NNICTLDOC.html">Command Line</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Annotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExperimentConfig.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="SearchSpaceSpec.html">Search Space</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contribution.html">Contribute to NNI</a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Neural Network Intelligence</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="Reference.html">References</a> &raquo;</li>
        
      <li>NNI Annotation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/AnnotationSpec.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nni-annotation">
<h1>NNI Annotation<a class="headerlink" href="#nni-annotation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>To improve user experience and reduce user effort, we design an annotation grammar. Using NNI annotation, users can adapt their code to NNI just by adding some standalone annotating strings, which does not affect the execution of the original code.</p>
<p>Below is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;@nni.variable(nni.choice(0.1, 0.01, 0.001), name=learning_rate)&#39;&#39;&#39;</span>
<span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.1</span>
</pre></div>
</div>
<p>The meaning of this example is that NNI will choose one of several values (0.1, 0.01, 0.001) to assign to the learning_rate variable. Specifically, this first line is an NNI annotation, which is a single string. Following is an assignment statement. What nni does here is to replace the right value of this assignment statement according to the information provided by the annotation line.</p>
<p>In this way, users could either run the python code directly or launch NNI to tune hyper-parameter in this code, without changing any codes.</p>
</div>
<div class="section" id="types-of-annotation">
<h2>Types of Annotation:<a class="headerlink" href="#types-of-annotation" title="Permalink to this headline">¶</a></h2>
<p>In NNI, there are mainly four types of annotation:</p>
<div class="section" id="annotate-variables">
<h3>1. Annotate variables<a class="headerlink" href="#annotate-variables" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">'''&#64;nni.variable(sampling_algo,</span> <span class="pre">name)'''</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;nni.variable</span></code> is used in NNI to annotate a variable.</p>
<p><strong>Arguments</strong></p>
<ul class="simple">
<li><strong>sampling_algo</strong>: Sampling algorithm that specifies a search space. User should replace it with a built-in NNI sampling function whose name consists of an <code class="docutils literal notranslate"><span class="pre">nni.</span></code> identification and a search space type specified in <a class="reference internal" href="SearchSpaceSpec.html"><span class="doc">SearchSpaceSpec</span></a> such as <code class="docutils literal notranslate"><span class="pre">choice</span></code> or <code class="docutils literal notranslate"><span class="pre">uniform</span></code>.</li>
<li><strong>name</strong>: The name of the variable that the selected value will be assigned to. Note that this argument should be the same as the left value of the following assignment statement.</li>
</ul>
<p>An example here is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;@nni.variable(nni.choice(0.1, 0.01, 0.001), name=learning_rate)&#39;&#39;&#39;</span>
<span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.1</span>
</pre></div>
</div>
</div>
<div class="section" id="annotate-functions">
<h3>2. Annotate functions<a class="headerlink" href="#annotate-functions" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">'''&#64;nni.function_choice(*functions,</span> <span class="pre">name)'''</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;nni.function_choice</span></code> is used to choose one from several functions.</p>
<p><strong>Arguments</strong></p>
<ul class="simple">
<li><strong>*functions</strong>: Several functions that are waiting to be selected from. Note that it should be a complete function call with arguments. Such as <code class="docutils literal notranslate"><span class="pre">max_pool(hidden_layer,</span> <span class="pre">pool_size)</span></code>.</li>
<li><strong>name</strong>: The name of the function that will be replaced in the following assignment statement.</li>
</ul>
<p>An example here is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;@nni.function_choice(max_pool(hidden_layer, pool_size), avg_pool(hidden_layer, pool_size), name=max_pool)&quot;&quot;&quot;</span>
<span class="n">h_pooling</span> <span class="o">=</span> <span class="n">max_pool</span><span class="p">(</span><span class="n">hidden_layer</span><span class="p">,</span> <span class="n">pool_size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="annotate-intermediate-result">
<h3>3. Annotate intermediate result<a class="headerlink" href="#annotate-intermediate-result" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">'''&#64;nni.report_intermediate_result(metrics)'''</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;nni.report_intermediate_result</span></code> is used to report intermediate result, whose usage is the same as <code class="docutils literal notranslate"><span class="pre">nni.report_intermediate_result</span></code> in <a class="reference internal" href="Trials.html"><span class="doc">Trials.md</span></a></p>
</div>
<div class="section" id="annotate-final-result">
<h3>4. Annotate final result<a class="headerlink" href="#annotate-final-result" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">'''&#64;nni.report_final_result(metrics)'''</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;nni.report_final_result</span></code> is used to report the final result of the current trial, whose usage is the same as <code class="docutils literal notranslate"><span class="pre">nni.report_final_result</span></code> in <a class="reference internal" href="Trials.html"><span class="doc">Trials.md</span></a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="FAQ.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Reference.html" class="btn btn-neutral" title="References" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Microsoft

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>